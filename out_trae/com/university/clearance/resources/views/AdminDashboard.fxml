<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane fx:id="mainBorderPane" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.university.clearance.controller.main.AdminDashboardController" stylesheets="@../CSS/style.css">
    
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" styleClass="header-bar">
            <children>
                <Label styleClass="header-title" text="University Clearance System" />
                <Label fx:id="lblWelcome" styleClass="header-info" />
                <Region HBox.hgrow="ALWAYS" />
                <HBox alignment="CENTER_RIGHT" spacing="20">
                    <Label fx:id="lblTotalStudents" styleClass="header-info" text="Students: 0" />
                    <Label fx:id="lblTotalOfficers" styleClass="header-info" text="Officers: 0" />
                    <Label fx:id="lblTotalRequests" styleClass="header-info" text="Requests: 0" />
                </HBox>
                <Button onAction="#handleLogout" styleClass="logout-button" text="ðŸšª Logout" />
            </children>
        </HBox>
    </top>
    
    <left>
        <VBox minWidth="220" spacing="10" styleClass="sidebar">
            <children>
                <Label styleClass="sidebar-label" text="USER MANAGEMENT" />
                
                <Button onAction="#openRegisterStudent" styleClass="sidebar-button" text="âž• Register Student" />
                <Button onAction="#openManageOfficers" styleClass="sidebar-button" text="ðŸ‘¨â€ðŸ’¼ Register Officer" />
                <Button onAction="#resetUserPassword" styleClass="sidebar-button" text="ðŸ”‘ Reset Password" />
                <Button onAction="#toggleUserStatus" styleClass="sidebar-button" text="ðŸ”„ Toggle Status" />
                <!-- NEW DELETE USER BUTTON -->
                <Button fx:id="btnDeleteUser" onAction="#handleDeleteUser" styleClass="sidebar-button" text="ðŸ—‘ï¸ Delete User" />
                
                <Separator style="-fx-padding: 10 0;" />
                
                <Label styleClass="sidebar-label" text="SYSTEM CONFIGURATION" />
                
                <Button onAction="#openWorkflowManagement" styleClass="sidebar-button" text="âš™ï¸ Approval Workflow" />
                <Button onAction="#openSessionManagement" styleClass="sidebar-button" text="ðŸ“… Academic Sessions" />
                <Button onAction="#processSemesterRollover" styleClass="sidebar-button" text="ðŸ”„ Semester Rollover" />
                
                <Separator style="-fx-padding: 10 0;" />
                
                <Label styleClass="sidebar-label" text="QUICK ACTIONS" />
                
                <Button onAction="#handleRefresh" styleClass="sidebar-button" text="ðŸ”„ Refresh All" />
                <Button fx:id="btnCurrentInfo" onAction="#showCurrentInfo" styleClass="sidebar-button" text="ðŸ“Š Current Info" />
            </children>
        </VBox>
    </left>
    
    <center>
        <!-- Main TabPane with larger tabs -->
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
            <tabs>
                <!-- Dashboard Tab -->
                <Tab text="ðŸ  Dashboard">
                    <content>
                        <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="ALWAYS">
                            <VBox spacing="20" styleClass="content-area">
                                <Label styleClass="card-title" text="Admin Dashboard Overview" />
                                
                                <!-- Current Info Cards Section - Initially hidden -->
                                <VBox fx:id="cardsContainer" managed="false" spacing="20" visible="false">
                                    <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Current System Information" />
                                    
                                    <GridPane hgap="20" vgap="20">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="25" />
                                            <ColumnConstraints percentWidth="25" />
                                            <ColumnConstraints percentWidth="25" />
                                            <ColumnConstraints percentWidth="25" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints prefHeight="120" />
                                            <RowConstraints prefHeight="120" />
                                        </rowConstraints>
                                        
                                        <!-- Row 1 -->
                                        <VBox styleClass="stat-card, bg-blue" GridPane.columnIndex="0">
                                            <Label styleClass="stat-label" text="Active Sessions" />
                                            <Label fx:id="lblActiveSessions" styleClass="stat-value" text="0" />
                                            <Label fx:id="lblSessionStatus" styleClass="stat-subtext" text="Current: N/A" />
                                        </VBox>
                                        
                                        <VBox styleClass="stat-card, bg-red" GridPane.columnIndex="1">
                                            <Label styleClass="stat-label" text="Pending Actions" />
                                            <Label fx:id="lblPendingActions" styleClass="stat-value" text="0" />
                                            <Label fx:id="lblActionStatus" styleClass="stat-subtext" text="Requires attention" />
                                        </VBox>
                                        
                                        <VBox styleClass="stat-card, bg-orange" GridPane.columnIndex="2">
                                            <Label styleClass="stat-label" text="System Load" />
                                            <Label fx:id="lblSystemLoad" styleClass="stat-value" text="0%" />
                                            <Label fx:id="lblLoadStatus" styleClass="stat-subtext" text="Optimal" />
                                        </VBox>
                                        
                                        <VBox styleClass="stat-card, bg-green" GridPane.columnIndex="3">
                                            <Label styleClass="stat-label" text="Uptime" />
                                            <Label fx:id="lblUptime" styleClass="stat-value" text="0d 0h 0m" />
                                            <Label fx:id="lblUptimeStatus" styleClass="stat-subtext" text="Running" />
                                        </VBox>
                                        
                                        <!-- Row 2 -->
                                        <VBox styleClass="stat-card, bg-purple" GridPane.columnIndex="0" GridPane.rowIndex="1">
                                            <Label styleClass="stat-label" text="Database" />
                                            <Label fx:id="lblDatabaseSize" styleClass="stat-value" text="0 MB" />
                                            <Label fx:id="lblDbStatus" styleClass="stat-subtext" text="Connected" />
                                        </VBox>
                                        
                                        <VBox styleClass="stat-card, bg-teal" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                            <Label styleClass="stat-label" text="Today's Logins" />
                                            <Label fx:id="lblTodayLogins" styleClass="stat-value" text="0" />
                                            <Label fx:id="lblLoginTrend" styleClass="stat-subtext" text="+0%" />
                                        </VBox>
                                        
                                        <VBox styleClass="stat-card, bg-orange" GridPane.columnIndex="2" GridPane.rowIndex="1">
                                            <Label styleClass="stat-label" text="Active Officers" />
                                            <Label fx:id="lblActiveOfficers" styleClass="stat-value" text="0" />
                                            <Label fx:id="lblOfficerStatus" styleClass="stat-subtext" text="Online: 0" />
                                        </VBox>
                                        
                                        <VBox styleClass="stat-card, bg-dark" GridPane.columnIndex="3" GridPane.rowIndex="1">
                                            <Label styleClass="stat-label" text="Clearance Rate" />
                                            <Label fx:id="lblClearanceRate" styleClass="stat-value" text="0%" />
                                            <Label fx:id="lblRateStatus" styleClass="stat-subtext" text="This week" />
                                        </VBox>
                                    </GridPane>
                                    
                                    <Separator style="-fx-padding: 10 0;" />
                                </VBox>
                                
                                <!-- Existing Dashboard Content -->
                                <HBox prefHeight="114.0" prefWidth="718.0" spacing="20">
                                    <VBox prefHeight="114.0" prefWidth="155.0" styleClass="stat-card, bg-blue">
                                        <Label styleClass="stat-label" text="Total Students" />
                                        <Label fx:id="lblTotalStudentsCard" styleClass="stat-value" text="0" />
                                    </VBox>
                                    
                                    <VBox prefHeight="114.0" prefWidth="140.0" styleClass="stat-card, bg-green">
                                        <Label styleClass="stat-label" text="Total Officers" />
                                        <Label fx:id="lblTotalOfficersCard" styleClass="stat-value" text="0" />
                                    </VBox>
                                    
                                    <VBox prefHeight="114.0" prefWidth="148.0" styleClass="stat-card, bg-red">
                                        <Label styleClass="stat-label" text="Total Requests" />
                                        <Label fx:id="lblTotalRequestsCard" styleClass="stat-value" text="0" />
                                    </VBox>
                                </HBox>
                                
                                <HBox spacing="20">
                                    <VBox prefHeight="114.0" prefWidth="145.0" styleClass="stat-card, bg-green">
                                        <Label styleClass="stat-label" text="âœ… Approved" />
                                        <Label fx:id="lblApprovedCount" styleClass="stat-value" text="0" />
                                    </VBox>
                                    
                                    <VBox prefHeight="114.0" prefWidth="140.0" styleClass="stat-card, bg-red">
                                        <Label styleClass="stat-label" text="âŒ Rejected" />
                                        <Label fx:id="lblRejectedCount" styleClass="stat-value" text="0" />
                                    </VBox>
                                    
                                    <VBox prefHeight="114.0" prefWidth="135.0" styleClass="stat-card, bg-orange">
                                        <Label styleClass="stat-label" text="â³ Pending" />
                                        <Label fx:id="lblPendingCount" styleClass="stat-value" text="0" />
                                    </VBox>
                                </HBox>
                            </VBox>
                        </ScrollPane>
                    </content>
                </Tab>
                
                <!-- All Users Tab -->
                <Tab style="-fx-background-color: #3498db;" text="ðŸ‘¥ All Users">
                    <content>
                        <VBox spacing="15">
                            <padding>
                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                            </padding>
                            
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="All System Users" />
                                <Region HBox.hgrow="ALWAYS" />
                                <ComboBox fx:id="cmbSearchType" prefWidth="150" style="-fx-background-color: #8b8f8b;" />
                                <TextField fx:id="txtSearchUsers" prefWidth="250" promptText="Search users..." />
                                <Button fx:id="btnSearchUsers" onAction="#handleUserSearch" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold;" text="ðŸ” Search" />
                                <Button fx:id="btnClearSearch" onAction="#handleClearSearch" style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-font-weight: bold;" text="âŒ Clear" />
                            </HBox>
                            
                            <Label fx:id="lblSearchStatus" style="-fx-text-fill: #3498db; -fx-font-size: 12px;" visible="false" />
                            
                            <!-- ScrollPane for All Users Table -->
                            <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="ALWAYS">
                                <TableView fx:id="tableAllUsers" prefHeight="500">
                                    <columns>
                                        <TableColumn prefWidth="120" text="Username" />
                                        <TableColumn prefWidth="200" text="Full Name" />
                                        <TableColumn prefWidth="120" text="Role" />
                                        <TableColumn prefWidth="150" text="Department" />
                                        <TableColumn prefWidth="100" text="Status" />
                                        <!-- Delete button column -->
                                        <TableColumn prefWidth="100" text="Actions" />
                                    </columns>
                                </TableView>
                            </ScrollPane>
                        </VBox>
                    </content>
                </Tab>
                
                <!-- Students Tab -->
                <Tab style="-fx-background-color: #3498db;" text="ðŸŽ“ Students">
                    <content>
                        <!-- Nested TabPane for student categories -->
                        <TabPane style="-fx-tab-min-height: 40; -fx-tab-min-width: 100;" tabClosingPolicy="UNAVAILABLE">
                            <tabs>
                                <Tab style="-fx-background-color: #3498db;" text="ðŸ“‹ All Students">
                                    <content>
                                        <VBox spacing="15">
                                            <padding>
                                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                                            </padding>
                                            <HBox alignment="CENTER_LEFT" spacing="10">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="All Students" />
                                                <Region HBox.hgrow="ALWAYS" />
                                            </HBox>
                                            <!-- ScrollPane for All Students Table -->
                                            <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="ALWAYS">
                                                <TableView fx:id="tableAllStudents" prefHeight="500">
                                                    <columns>
                                                        <TableColumn prefWidth="120" text="Student ID" />
                                                        <TableColumn prefWidth="200" text="Full Name" />
                                                        <TableColumn prefWidth="150" text="Department" />
                                                        <TableColumn prefWidth="100" text="Year" />
                                                        <TableColumn prefWidth="120" text="Status" />
                                                        <TableColumn prefWidth="200" text="Actions" />
                                                    </columns>
                                                </TableView>
                                            </ScrollPane>
                                        </VBox>
                                    </content>
                                </Tab>
                                
                                <Tab style="-fx-background-color: #3498db;" text="âœ… Approved">
                                    <content>
                                        <VBox spacing="15">
                                            <padding>
                                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                                            </padding>
                                            <HBox alignment="CENTER_LEFT" spacing="10">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="Approved Students" />
                                                <Region HBox.hgrow="ALWAYS" />
                                            </HBox>
                                            <!-- ScrollPane for Approved Students Table -->
                                            <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="ALWAYS">
                                                <TableView fx:id="tableApprovedStudents" prefHeight="500">
                                                    <columns>
                                                        <TableColumn prefWidth="120" text="Student ID" />
                                                        <TableColumn prefWidth="200" text="Full Name" />
                                                        <TableColumn prefWidth="150" text="Department" />
                                                        <TableColumn prefWidth="120" text="Status" />
                                                    </columns>
                                                </TableView>
                                            </ScrollPane>
                                        </VBox>
                                    </content>
                                </Tab>
                                
                                <Tab style="-fx-background-color: #3498db;" text="âŒ Rejected">
                                    <content>
                                        <VBox spacing="15">
                                            <padding>
                                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                                            </padding>
                                            <HBox alignment="CENTER_LEFT" spacing="10">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="Rejected Students" />
                                                <Region HBox.hgrow="ALWAYS" />
                                            </HBox>
                                            <!-- ScrollPane for Rejected Students Table -->
                                            <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="ALWAYS">
                                                <TableView fx:id="tableRejectedStudents" prefHeight="500">
                                                    <columns>
                                                        <TableColumn prefWidth="120" text="Student ID" />
                                                        <TableColumn prefWidth="200" text="Full Name" />
                                                        <TableColumn prefWidth="150" text="Department" />
                                                        <TableColumn prefWidth="120" text="Status" />
                                                        <TableColumn prefWidth="200" text="Actions" />
                                                    </columns>
                                                </TableView>
                                            </ScrollPane>
                                        </VBox>
                                    </content>
                                </Tab>
                                
                                <Tab style="-fx-background-color: #3498db;" text="â³ Pending">
                                    <content>
                                        <VBox spacing="15">
                                            <padding>
                                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                                            </padding>
                                            <HBox alignment="CENTER_LEFT" spacing="10">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="Pending Students" />
                                                <Region HBox.hgrow="ALWAYS" />
                                            </HBox>
                                            <!-- ScrollPane for Pending Students Table -->
                                            <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="ALWAYS">
                                                <TableView fx:id="tablePendingStudents" prefHeight="500">
                                                    <columns>
                                                        <TableColumn prefWidth="120" text="Student ID" />
                                                        <TableColumn prefWidth="200" text="Full Name" />
                                                        <TableColumn prefWidth="150" text="Department" />
                                                        <TableColumn prefWidth="120" text="Status" />
                                                    </columns>
                                                </TableView>
                                            </ScrollPane>
                                        </VBox>
                                    </content>
                                </Tab>
                                
                                <Tab style="-fx-background-color: #3498db;" text="ðŸ”„ In Progress">
                                    <content>
                                        <VBox spacing="15">
                                            <padding>
                                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                                            </padding>
                                            <HBox alignment="CENTER_LEFT" spacing="10">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="In Progress Students" />
                                                <Region HBox.hgrow="ALWAYS" />
                                            </HBox>
                                            <!-- ScrollPane for In Progress Students Table -->
                                            <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="ALWAYS">
                                                <TableView fx:id="tableInProgressStudents" prefHeight="500">
                                                    <columns>
                                                        <TableColumn prefWidth="120" text="Student ID" />
                                                        <TableColumn prefWidth="200" text="Full Name" />
                                                        <TableColumn prefWidth="150" text="Department" />
                                                        <TableColumn prefWidth="120" text="Status" />
                                                    </columns>
                                                </TableView>
                                            </ScrollPane>
                                        </VBox>
                                    </content>
                                </Tab>
                            </tabs>
                        </TabPane>
                    </content>
                </Tab>
                
                <!-- Officers Tab -->
                <Tab style="-fx-background-color: #3498db;" text="ðŸ‘¨â€ðŸ’¼ Officers">
                    <content>
                        <VBox spacing="15">
                            <padding>
                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                            </padding>
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="All Officers" />
                                <Region HBox.hgrow="ALWAYS" />
                            </HBox>
                            <!-- ScrollPane for Officers Table -->
                            <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="ALWAYS">
                                <TableView fx:id="tableOfficers" prefHeight="500">
                                    <columns>
                                        <TableColumn prefWidth="120" text="Username" />
                                        <TableColumn prefWidth="200" text="Full Name" />
                                        <TableColumn prefWidth="120" text="Role" />
                                        <TableColumn prefWidth="150" text="Department" />
                                        <TableColumn prefWidth="100" text="Status" />
                                        <!-- Delete button column -->
                                        <TableColumn prefWidth="100" text="Actions" />
                                    </columns>
                                </TableView>
                            </ScrollPane>
                        </VBox>
                    </content>
                </Tab>
                
                <!-- Clearance Requests Tab -->
                <Tab style="-fx-background-color: #3498db;" text="ðŸ“ Clearance Requests">
                    <content>
                        <VBox spacing="15">
                            <padding>
                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                            </padding>
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="All Clearance Requests" />
                                <TextField fx:id="txtSearchRequests" prefWidth="300" promptText="Search requests..." />
                                <Region HBox.hgrow="ALWAYS" />
                                <Button fx:id="btnSearchRequests" onAction="#handleRequestsSearch" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold;" text="ðŸ” Search" />
                                <Button fx:id="btnClearRequestsSearch" onAction="#handleClearRequestsSearch" style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-font-weight: bold;" text="âŒ Clear" />
                                <Button onAction="#handleRefresh" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold;" text="ðŸ”„ Refresh" />
                            </HBox>
                            <!-- ScrollPane for Clearance Requests Table -->
                            <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="ALWAYS">
                                <TableView fx:id="tableRequests" prefHeight="500">
                                    <columns>
                                        <TableColumn prefWidth="120" text="Student ID" />
                                        <TableColumn prefWidth="200" text="Full Name" />
                                        <TableColumn prefWidth="150" text="Department" />
                                        <TableColumn prefWidth="120" text="Status" />
                                        <TableColumn prefWidth="150" text="Request Date" />
                                        <TableColumn prefWidth="100" text="Approved" />
                                        <!-- NEW: Allow Resubmission button column with fx:id -->
                                        <TableColumn fx:id="colResubmission" prefWidth="150" text="Resubmission" />
                                    </columns>
                                </TableView>
                            </ScrollPane>
                        </VBox>
                    </content>
                </Tab>
                
                <!-- Reports Tab -->
                <Tab style="-fx-background-color: #3498db;" text="ðŸ“Š Reports">
                    <content>
                        <ScrollPane fitToHeight="true" fitToWidth="true" hbarPolicy="AS_NEEDED" vbarPolicy="ALWAYS">
                            <VBox spacing="20" style="-fx-padding: 20;">
                                <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="System Reports &amp; Analytics" />
                                
                                <VBox spacing="15" style="-fx-background-color: #ecf0f1; -fx-padding: 20; -fx-background-radius: 10;">
                                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Available Reports" />
                                    <VBox spacing="5">
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ“ˆ Clearance Status Report" />
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ“„ Certificate Generation Logs" />
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ‘¨â€ðŸ’¼ Officer Approval Performance" />
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ“š Student Clearance History" />
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ« Department-wise Clearance Statistics" />
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ“ Registration Audit Logs" />
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ—‘ï¸ User Deletion Audit Logs" />
                                    </VBox>
                                </VBox>
                                
                                <VBox spacing="15" style="-fx-background-color: #f8f9fa; -fx-padding: 20; -fx-background-radius: 10;">
                                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Quick Statistics" />
                                    <GridPane hgap="20" vgap="10">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="50" />
                                            <ColumnConstraints percentWidth="50" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints prefHeight="40" />
                                            <RowConstraints prefHeight="40" />
                                        </rowConstraints>
                                        
                                        <VBox GridPane.columnIndex="0" GridPane.rowIndex="0">
                                            <Label style="-fx-font-weight: bold;" text="Total Users Deleted Today:" />
                                            <Label fx:id="lblDeletedToday" style="-fx-font-size: 24px; -fx-text-fill: #e74c3c;" text="0" />
                                        </VBox>
                                        
                                        <VBox GridPane.columnIndex="1" GridPane.rowIndex="0">
                                            <Label style="-fx-font-weight: bold;" text="Resubmissions Allowed:" />
                                            <Label fx:id="lblResubmissionsAllowed" style="-fx-font-size: 24px; -fx-text-fill: #27ae60;" text="0" />
                                        </VBox>
                                        
                                        <VBox GridPane.columnIndex="0" GridPane.rowIndex="1">
                                            <Label style="-fx-font-weight: bold;" text="Pending Resubmissions:" />
                                            <Label fx:id="lblPendingResubmissions" style="-fx-font-size: 24px; -fx-text-fill: #f39c12;" text="0" />
                                        </VBox>
                                        
                                        <VBox GridPane.columnIndex="1" GridPane.rowIndex="1">
                                            <Label style="-fx-font-weight: bold;" text="Expired Requests:" />
                                            <Label fx:id="lblExpiredRequests" style="-fx-font-size: 24px; -fx-text-fill: #95a5a6;" text="0" />
                                        </VBox>
                                    </GridPane>
                                </VBox>
                                
                                <!-- Additional Statistics Section -->
                                <VBox spacing="15" style="-fx-background-color: #e8f4f8; -fx-padding: 20; -fx-background-radius: 10;">
                                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Resubmission Statistics" />
                                    <GridPane hgap="20" vgap="15">
                                        <columnConstraints>
                                            <ColumnConstraints percentWidth="33" />
                                            <ColumnConstraints percentWidth="33" />
                                            <ColumnConstraints percentWidth="33" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints prefHeight="60" />
                                        </rowConstraints>
                                        
                                        <VBox alignment="CENTER" GridPane.columnIndex="0">
                                            <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" text="Eligible for Resubmission" />
                                            <Label fx:id="lblEligibleResubmissions" style="-fx-font-size: 28px; -fx-text-fill: #3498db; -fx-font-weight: bold;" text="0" />
                                        </VBox>
                                        
                                        <VBox alignment="CENTER" GridPane.columnIndex="1">
                                            <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" text="Recently Resubmitted" />
                                            <Label fx:id="lblRecentResubmissions" style="-fx-font-size: 28px; -fx-text-fill: #27ae60; -fx-font-weight: bold;" text="0" />
                                        </VBox>
                                        
                                        <VBox alignment="CENTER" GridPane.columnIndex="2">
                                            <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" text="Resubmission Success Rate" />
                                            <Label fx:id="lblResubmissionSuccessRate" style="-fx-font-size: 28px; -fx-text-fill: #f39c12; -fx-font-weight: bold;" text="0%" />
                                        </VBox>
                                    </GridPane>
                                </VBox>
                                
                                <!-- Quick Actions for Reports -->
                                <HBox alignment="CENTER" spacing="15">
                                    <Button onAction="#generateClearanceCertificates" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10 20;" text="ðŸ“Š Generate Status Report" />
                                    <Button onAction="#verifyCertificate" style="-fx-background-color: #2ecc71; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10 20;" text="ðŸ“ˆ Performance Analytics" />
                                    <Button style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10 20;" text="ðŸ“‹ Export to Excel" />
                                </HBox>
                            </VBox>
                        </ScrollPane>
                    </content>
                </Tab>
            </tabs>
        </TabPane>
    </center>
    
    <!-- Status Bar -->
    <bottom>
        <HBox style="-fx-background-color: #ecf0f1; -fx-padding: 8 15;">
            <children>
                <Label fx:id="lblConnectionStatus" style="-fx-text-fill: #27ae60; -fx-font-weight: bold;" text="ðŸŸ¢ Connected" />
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="lblLastUpdate" style="-fx-text-fill: #7f8c8d;" text="Last update: " />
                <Label fx:id="lblUpdateTime" style="-fx-text-fill: #2c3e50; -fx-font-weight: bold;" text="Just now" />
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="lblResubmissionStatus" style="-fx-text-fill: #3498db; -fx-font-size: 12px;" text="Resubmissions: 0 eligible" />
            </children>
        </HBox>
    </bottom>
</BorderPane>