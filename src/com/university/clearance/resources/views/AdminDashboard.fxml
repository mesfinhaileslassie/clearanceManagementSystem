<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.university.clearance.controller.AdminDashboardController">
    
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: #2c3e50; -fx-padding: 15;">
            <children>
                <Label style="-fx-font-weight: bold; -fx-font-size: 22;" text="University Clearance System" textFill="WHITE">
                    <font>
                        <Font name="Arial Bold" size="22.0" />
                    </font>
                </Label>
                <Label fx:id="lblWelcome" style="-fx-font-size: 16;" textFill="WHITE">
                    <font>
                        <Font name="Arial" size="16.0" />
                    </font>
                </Label>
                <Region HBox.hgrow="ALWAYS" />
                <HBox alignment="CENTER_RIGHT" spacing="20">
                    <Label fx:id="lblTotalStudents" style="-fx-text-fill: #ecf0f1; -fx-font-weight: bold; -fx-font-size: 14;" text="Students: 0" />
                    <Label fx:id="lblTotalOfficers" style="-fx-text-fill: #ecf0f1; -fx-font-weight: bold; -fx-font-size: 14;" text="Officers: 0" />
                    <Label fx:id="lblTotalRequests" style="-fx-text-fill: #ecf0f1; -fx-font-weight: bold; -fx-font-size: 14;" text="Requests: 0" />
                </HBox>
                <Button onAction="#handleLogout" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 20;" text="ðŸšª Logout" />
            </children>
        </HBox>
    </top>
    
    <left>
        <VBox minWidth="220" spacing="10" style="-fx-background-color: #34495e; -fx-padding: 15;">
            <children>
                <Label style="-fx-text-fill: #ecf0f1; -fx-font-weight: bold; -fx-padding: 0 0 5 0;" text="USER MANAGEMENT" />
                
                <Button onAction="#openRegisterStudent" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 200; -fx-font-weight: bold; -fx-padding: 10;" text="âž• Register Student" />
                <Button onAction="#openManageOfficers" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 200; -fx-font-weight: bold; -fx-padding: 10;" text="ðŸ‘¨â€ðŸ’¼ Register Officer" />
                <Button onAction="#resetUserPassword" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 200; -fx-padding: 10; -fx-font-weight: bold;" text="ðŸ”‘ Reset Password" />
                <Button onAction="#toggleUserStatus" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 200; -fx-padding: 10; -fx-font-weight: bold;" text="ðŸ”„ Toggle Status" />
                
                <Separator style="-fx-padding: 10 0;" />
                
                <Label style="-fx-text-fill: #ecf0f1; -fx-font-weight: bold; -fx-padding: 0 0 5 0;" text="SYSTEM CONFIGURATION" />
                
                <Button onAction="#openWorkflowManagement" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 200; -fx-padding: 10; -fx-font-weight: bold;" text="âš™ï¸ Approval Workflow" />
                <Button onAction="#openSessionManagement" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 200; -fx-padding: 10; -fx-font-weight: bold;" text="ðŸ“… Academic Sessions" />
                <Button onAction="#processSemesterRollover" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 200; -fx-font-weight: bold; -fx-padding: 10;" text="ðŸ”„ Semester Rollover" />
                
                <Separator style="-fx-padding: 10 0;" />
                
                <Label style="-fx-text-fill: #ecf0f1; -fx-font-weight: bold; -fx-padding: 0 0 5 0;" text="QUICK ACTIONS" />
                
                <Button onAction="#handleRefresh" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-pref-width: 200; -fx-font-weight: bold; -fx-padding: 10;" text="ðŸ”„ Refresh All" />
            </children>
        </VBox>
    </left>
    
    <center>
        <!-- Main TabPane with larger tabs -->
        <TabPane fx:id="mainTabPane" style="-fx-tab-min-height: 50; -fx-tab-min-width: 150;" tabClosingPolicy="UNAVAILABLE">
            <tabs>
                <!-- Dashboard Tab -->
                <Tab style="-fx-background-color: #3498db; -fx-text-fill: white;" text="ðŸ  Dashboard">
                    <content>
                        <ScrollPane fitToHeight="true" fitToWidth="true">
                            <VBox spacing="20" style="-fx-padding: 20;">
                                <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Admin Dashboard Overview" />
                                
                                <HBox prefHeight="114.0" prefWidth="718.0" spacing="20">
                                    <VBox prefHeight="114.0" prefWidth="155.0" style="-fx-background-color: #3498db; -fx-padding: 20; -fx-background-radius: 10;">
                                        <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="Total Students" />
                                        <Label fx:id="lblTotalStudentsCard" style="-fx-text-fill: white; -fx-font-size: 32px; -fx-font-weight: bold;" text="0" />
                                    </VBox>
                                    
                                    <VBox prefHeight="114.0" prefWidth="140.0" style="-fx-background-color: #2ecc71; -fx-padding: 20; -fx-background-radius: 10;">
                                        <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="Total Officers" />
                                        <Label fx:id="lblTotalOfficersCard" style="-fx-text-fill: white; -fx-font-size: 32px; -fx-font-weight: bold;" text="0" />
                                    </VBox>
                                    
                                    <VBox prefHeight="114.0" prefWidth="148.0" style="-fx-background-color: #e74c3c; -fx-padding: 20; -fx-background-radius: 10;">
                                        <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="Total Requests" />
                                        <Label fx:id="lblTotalRequestsCard" style="-fx-text-fill: white; -fx-font-size: 32px; -fx-font-weight: bold;" text="0" />
                                    </VBox>
                                </HBox>
                                
                                <HBox spacing="20">
                                    <VBox prefHeight="114.0" prefWidth="145.0" style="-fx-background-color: #27ae60; -fx-padding: 20; -fx-background-radius: 10;">
                                        <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="âœ… Approved" />
                                        <Label fx:id="lblApprovedCount" style="-fx-text-fill: white; -fx-font-size: 32px; -fx-font-weight: bold;" text="0" />
                                    </VBox>
                                    
                                    <VBox prefHeight="114.0" prefWidth="140.0" style="-fx-background-color: #e74c3c; -fx-padding: 20; -fx-background-radius: 10;">
                                        <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="âŒ Rejected" />
                                        <Label fx:id="lblRejectedCount" style="-fx-text-fill: white; -fx-font-size: 32px; -fx-font-weight: bold;" text="0" />
                                    </VBox>
                                    
                                    <VBox prefHeight="114.0" prefWidth="135.0" style="-fx-background-color: #f39c12; -fx-padding: 20; -fx-background-radius: 10;">
                                        <Label style="-fx-text-fill: white; -fx-font-size: 16px;" text="â³ Pending" />
                                        <Label fx:id="lblPendingCount" style="-fx-text-fill: white; -fx-font-size: 32px; -fx-font-weight: bold;" text="0" />
                                    </VBox>
                                </HBox>
                            </VBox>
                        </ScrollPane>
                    </content>
                </Tab>
                
                <!-- All Users Tab -->
                <Tab style="-fx-background-color: #3498db;" text="ðŸ‘¥ All Users">
                    <content>
                        <VBox spacing="15">
                            <padding>
                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                            </padding>
                            
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="All System Users" />
                                <Region HBox.hgrow="ALWAYS" />
                                <ComboBox fx:id="cmbSearchType" prefWidth="150" style="-fx-background-color: #8b8f8b;" />
                                <TextField fx:id="txtSearchUsers" prefWidth="250" promptText="Search users..." />
                                <Button fx:id="btnSearchUsers" onAction="#handleUserSearch" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold;" text="ðŸ” Search" />
                                <Button fx:id="btnClearSearch" onAction="#handleClearSearch" style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-font-weight: bold;" text="âŒ Clear" />
                            </HBox>
                            
                            <Label fx:id="lblSearchStatus" style="-fx-text-fill: #3498db; -fx-font-size: 12px;" visible="false" />
                            
                            <TableView fx:id="tableAllUsers" prefHeight="500">
                                <columns>
                                    <TableColumn fx:id="colAllUserId" prefWidth="120" text="Username" />
                                    <TableColumn fx:id="colAllUserName" prefWidth="200" text="Full Name" />
                                    <TableColumn fx:id="colAllUserRole" prefWidth="120" text="Role" />
                                    <TableColumn fx:id="colAllUserDepartment" prefWidth="150" text="Department" />
                                    <TableColumn fx:id="colAllUserStatus" prefWidth="100" text="Status" />
                                </columns>
                            </TableView>
                        </VBox>
                    </content>
                </Tab>
                
                <!-- Students Tab -->
                <Tab style="-fx-background-color: #3498db;" text="ðŸŽ“ Students">
                    <content>
                        <!-- Nested TabPane for student categories -->
                        <TabPane style="-fx-tab-min-height: 40; -fx-tab-min-width: 100;" tabClosingPolicy="UNAVAILABLE">
                            <tabs>
                                <Tab style="-fx-background-color: #3498db;" text="ðŸ“‹ All Students">
                                    <content>
                                        <VBox spacing="15">
                                            <padding>
                                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                                            </padding>
                                            <HBox alignment="CENTER_LEFT" spacing="10">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="All Students" />
                                                <Region HBox.hgrow="ALWAYS" />
                                            </HBox>
                                            <TableView fx:id="tableAllStudents" prefHeight="500">
                                                <columns>
                                                    <TableColumn fx:id="colStudentId" prefWidth="120" text="Student ID" />
                                                    <TableColumn fx:id="colStudentName" prefWidth="200" text="Full Name" />
                                                    <TableColumn fx:id="colStudentDepartment" prefWidth="150" text="Department" />
                                                    <TableColumn fx:id="colStudentYear" prefWidth="100" text="Year" />
                                                    <TableColumn fx:id="colClearanceStatus" prefWidth="120" text="Status" />
                                                    <TableColumn fx:id="colStudentActions" prefWidth="200" text="Actions" />
                                                </columns>
                                            </TableView>
                                        </VBox>
                                    </content>
                                </Tab>
                                
                                <Tab style="-fx-background-color: #3498db;" text="âœ… Approved">
                                    <content>
                                        <VBox spacing="15">
                                            <padding>
                                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                                            </padding>
                                            <HBox alignment="CENTER_LEFT" spacing="10">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="Approved Students" />
                                                <Region HBox.hgrow="ALWAYS" />
                                            </HBox>
                                            <TableView fx:id="tableApprovedStudents" prefHeight="500">
                                                <columns>
                                                    <TableColumn prefWidth="120" text="Student ID" />
                                                    <TableColumn prefWidth="200" text="Full Name" />
                                                    <TableColumn prefWidth="150" text="Department" />
                                                    <TableColumn prefWidth="120" text="Status" />
                                                </columns>
                                            </TableView>
                                        </VBox>
                                    </content>
                                </Tab>
                                
                                <Tab style="-fx-background-color: #3498db;" text="âŒ Rejected">
                                    <content>
                                        <VBox spacing="15">
                                            <padding>
                                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                                            </padding>
                                            <HBox alignment="CENTER_LEFT" spacing="10">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="Rejected Students" />
                                                <Region HBox.hgrow="ALWAYS" />
                                            </HBox>
                                            <TableView fx:id="tableRejectedStudents" prefHeight="500">
                                                <columns>
                                                    <TableColumn prefWidth="120" text="Student ID" />
                                                    <TableColumn prefWidth="200" text="Full Name" />
                                                    <TableColumn prefWidth="150" text="Department" />
                                                    <TableColumn prefWidth="120" text="Status" />
                                                    <TableColumn prefWidth="200" text="Actions" />
                                                </columns>
                                            </TableView>
                                        </VBox>
                                    </content>
                                </Tab>
                                
                                <Tab style="-fx-background-color: #3498db;" text="â³ Pending">
                                    <content>
                                        <VBox spacing="15">
                                            <padding>
                                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                                            </padding>
                                            <HBox alignment="CENTER_LEFT" spacing="10">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="Pending Students" />
                                                <Region HBox.hgrow="ALWAYS" />
                                            </HBox>
                                            <TableView fx:id="tablePendingStudents" prefHeight="500">
                                                <columns>
                                                    <TableColumn prefWidth="120" text="Student ID" />
                                                    <TableColumn prefWidth="200" text="Full Name" />
                                                    <TableColumn prefWidth="150" text="Department" />
                                                    <TableColumn prefWidth="120" text="Status" />
                                                </columns>
                                            </TableView>
                                        </VBox>
                                    </content>
                                </Tab>
                                
                                <Tab style="-fx-background-color: #3498db;" text="ðŸ”„ In Progress">
                                    <content>
                                        <VBox spacing="15">
                                            <padding>
                                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                                            </padding>
                                            <HBox alignment="CENTER_LEFT" spacing="10">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="In Progress Students" />
                                                <Region HBox.hgrow="ALWAYS" />
                                            </HBox>
                                            <TableView fx:id="tableInProgressStudents" prefHeight="500">
                                                <columns>
                                                    <TableColumn prefWidth="120" text="Student ID" />
                                                    <TableColumn prefWidth="200" text="Full Name" />
                                                    <TableColumn prefWidth="150" text="Department" />
                                                    <TableColumn prefWidth="120" text="Status" />
                                                </columns>
                                            </TableView>
                                        </VBox>
                                    </content>
                                </Tab>
                            </tabs>
                        </TabPane>
                    </content>
                </Tab>
                
                <!-- Officers Tab -->
                <Tab style="-fx-background-color: #3498db;" text="ðŸ‘¨â€ðŸ’¼ Officers">
                    <content>
                        <VBox spacing="15">
                            <padding>
                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                            </padding>
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="All Officers" />
                                <Region HBox.hgrow="ALWAYS" />
                            </HBox>
                            <TableView fx:id="tableOfficers" prefHeight="500">
                                <columns>
                                    <TableColumn fx:id="colOfficerId" prefWidth="120" text="Username" />
                                    <TableColumn fx:id="colOfficerName" prefWidth="200" text="Full Name" />
                                    <TableColumn fx:id="colOfficerRole" prefWidth="120" text="Role" />
                                    <TableColumn fx:id="colOfficerDepartment" prefWidth="150" text="Department" />
                                    <TableColumn fx:id="colOfficerStatus" prefWidth="100" text="Status" />
                                </columns>
                            </TableView>
                        </VBox>
                    </content>
                </Tab>
                
                <!-- Clearance Requests Tab -->
                <Tab style="-fx-background-color: #3498db;" text="ðŸ“ Clearance Requests">
                    <content>
                        <VBox spacing="15">
                            <padding>
                                <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                            </padding>
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="All Clearance Requests" />
                                <TextField fx:id="txtSearchRequests" prefWidth="300" promptText="Search requests..." />
                                <Region HBox.hgrow="ALWAYS" />
                                <Button fx:id="btnSearchRequests" onAction="#handleRequestsSearch" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold;" text="ðŸ” Search" />
                                <Button fx:id="btnClearRequestsSearch" onAction="#handleClearRequestsSearch" style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-font-weight: bold;" text="âŒ Clear" />
                                <Button onAction="#handleRefresh" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold;" text="ðŸ”„ Refresh" />
                            </HBox>
                            <TableView fx:id="tableRequests" prefHeight="500">
                                <columns>
                                    <TableColumn fx:id="colRequestStudentId" prefWidth="120" text="Student ID" />
                                    <TableColumn fx:id="colRequestName" prefWidth="200" text="Full Name" />
                                    <TableColumn fx:id="colRequestDepartment" prefWidth="150" text="Department" />
                                    <TableColumn fx:id="colRequestStatus" prefWidth="120" text="Status" />
                                    <TableColumn fx:id="colRequestDate" prefWidth="150" text="Request Date" />
                                    <TableColumn fx:id="colRequestApproved" prefWidth="100" text="Approved" />
                                </columns>
                            </TableView>
                        </VBox>
                    </content>
                </Tab>
                
                <!-- Reports Tab -->
                <Tab style="-fx-background-color: #3498db;" text="ðŸ“Š Reports">
                    <content>
                        <ScrollPane fitToHeight="true" fitToWidth="true">
                            <VBox spacing="20" style="-fx-padding: 20;">
                                <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="System Reports &amp; Analytics" />
                                
                                <VBox spacing="15" style="-fx-background-color: #ecf0f1; -fx-padding: 20; -fx-background-radius: 10;">
                                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Available Reports" />
                                    <VBox spacing="5">
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ“ˆ Clearance Status Report" />
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ“„ Certificate Generation Logs" />
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ‘¨â€ðŸ’¼ Officer Approval Performance" />
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ“š Student Clearance History" />
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ« Department-wise Clearance Statistics" />
                                        <Label style="-fx-font-weight: bold;" text="â€¢ ðŸ“ Registration Audit Logs" />
                                    </VBox>
                                </VBox>
                            </VBox>
                        </ScrollPane>
                    </content>
                </Tab>
            </tabs>
        </TabPane>
    </center>
    
    <!-- Status Bar -->
    <bottom>
        <HBox style="-fx-background-color: #ecf0f1; -fx-padding: 8 15;">
            <children>
                <Label fx:id="lblConnectionStatus" style="-fx-text-fill: #27ae60; -fx-font-weight: bold;" text="ðŸŸ¢ Connected" />
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="lblLastUpdate" style="-fx-text-fill: #7f8c8d;" text="Last update: " />
                <Label fx:id="lblUpdateTime" style="-fx-text-fill: #2c3e50; -fx-font-weight: bold;" text="Just now" />
            </children>
        </HBox>
    </bottom>
</BorderPane>
