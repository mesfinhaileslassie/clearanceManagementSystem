<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox alignment="CENTER" minHeight="-Infinity" minWidth="-Infinity" prefHeight="850.0" prefWidth="524.0" spacing="25.0" style="-fx-background-color: #41506E;" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.university.clearance.controller.LoginController">
    
    <padding>
        <Insets bottom="40.0" left="50.0" right="50.0" top="40.0" />
    </padding>

    <VBox alignment="CENTER" spacing="15.0">
        <children>
            <ImageView fx:id="imgLogo" fitHeight="150.0" fitWidth="280.0" pickOnBounds="true" preserveRatio="true">
                <image>
                    <Image url="@../images/dbu_logo.png" />
                </image>
                <effect>
                    <DropShadow blurType="GAUSSIAN" color="#3b82f666" height="30" radius="14" width="30" />
                </effect>
            </ImageView>
            <Label alignment="CENTER" text="DBU CMS" textFill="WHITE">
                <font>
                    <Font name="System Bold" size="26.0" />
                </font>
            </Label>
        </children>
    </VBox>

    <VBox alignment="CENTER" maxWidth="450" prefHeight="450.0" prefWidth="424.0" spacing="20.0" style="-fx-background-color: rgba(255, 255, 255, 0.07); -fx-background-radius: 25; -fx-border-radius: 25; -fx-border-color: #5877f5; -fx-border-width: 1.5;">
        <padding>
            <Insets bottom="40.0" left="40.0" right="40.0" top="40.0" />
        </padding>
        <effect>
            <DropShadow color="#00000088" radius="30" />
        </effect>

        <VBox alignment="CENTER" spacing="5">
            <Label style="-fx-font-size: 26px; -fx-font-weight: 800; -fx-text-fill: white;" text="WELCOME BACK" />
            <Label style="-fx-font-size: 13px; -fx-text-fill: #94a3b8;" text="University Clearance System" />
        </VBox>

        <TextField fx:id="txtUsername" prefHeight="45.0" promptText="Enter your username" 
                   style="-fx-background-color: rgba(0,0,0,0.3); -fx-text-fill: white; -fx-prompt-text-fill: white; -fx-background-radius: 12; -fx-border-color: rgba(255,255,255,0.1); -fx-border-radius: 12; -fx-font-size: 14px; -fx-padding: 0 15 0 15;" />

        <VBox alignment="CENTER_LEFT" spacing="8.0">
    <StackPane alignment="CENTER_LEFT">
        <!-- Password Field (hidden by default) -->
        <PasswordField fx:id="txtPassword" prefHeight="45.0" promptText="Enter your password" 
                       style="-fx-background-color: rgba(0,0,0,0.3); -fx-text-fill: white; -fx-prompt-text-fill: white; -fx-background-radius: 12; -fx-border-color: rgba(255,255,255,0.1); -fx-border-radius: 12; -fx-font-size: 14px; -fx-padding: 0 15 0 15;" />
        
        <!-- Add this TextField for visible password -->
        <TextField fx:id="txtPasswordVisible" prefHeight="45.0" promptText="Enter your password" 
                   style="-fx-background-color: rgba(0,0,0,0.3); -fx-text-fill: white; -fx-prompt-text-fill: white; -fx-background-radius: 12; -fx-border-color: rgba(255,255,255,0.1); -fx-border-radius: 12; -fx-font-size: 14px; -fx-padding: 0 15 0 15;" 
                   visible="false" />
    </StackPane>
    <CheckBox fx:id="chkShowPassword" style="-fx-text-fill: #94a3b8; -fx-font-size: 12px; -fx-cursor: hand;" text="Show Password" />
</VBox>

        <ComboBox fx:id="cmbRole" maxWidth="Infinity" prefHeight="45.0" promptText="Select Role" 
                  style="-fx-background-color: rgba(0,0,0,0.3); -fx-background-radius: 12; -fx-border-color: rgba(255,255,255,0.1); -fx-border-radius: 12; -fx-font-size: 14px;"
                  styleClass="white-prompt-combo" />

        <Button fx:id="loginbtn" maxWidth="Infinity" onAction="#handleLogin" prefHeight="50.0" 
                style="-fx-background-color: linear-gradient(to right, #38bdf8, #818cf8); -fx-background-radius: 12; -fx-font-size: 16px; -fx-font-weight: 800; -fx-text-fill: white; -fx-cursor: hand;" text="SIGN IN →">
            <effect>
                <DropShadow color="#38bdf866" radius="15" />
            </effect>
        </Button>

        <Label fx:id="lblMessage" alignment="CENTER" style="-fx-text-fill: #fb7185; -fx-font-size: 13px;" />
    </VBox>
    
    <Label style="-fx-text-fill: #94a3b8; -fx-font-size: 11px;" text="© Debre Berhan University" />
</VBox>